!function(t,r){for(var e in r)t[e]=r[e]}(exports,function(t){var r={};function e(s){if(r[s])return r[s].exports;var i=r[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=r,e.d=function(t,r,s){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:s})},e.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=0)}([function(t,r,e){"use strict";e.r(r);var s=t=>{t._render=function(t,r){if(!t.cursorState||t.cursorHidden)return void this._clearCursor();const e=t.buffer.ybase+t.buffer.y,s=e-t.buffer.ydisp;if(s<0||s>=t.rows)return void this._clearCursor();const i=t.buffer.lines.get(e)[t.buffer.x];if(i){if(!t.isFocused)return this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._renderBlurCursor(t,t.buffer.x,s,i),this._ctx.restore(),this._state.x=t.buffer.x,this._state.y=s,this._state.isFocused=!1,this._state.style=t.options.cursorStyle,void(this._state.width=i[2]);if(this._state){if(this._state.x===t.buffer.x&&this._state.y===s&&this._state.isFocused===t.isFocused&&this._state.style===t.options.cursorStyle&&this._state.width===i[2])return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[t.options.cursorStyle||"block"](t,t.buffer.x,s,i),this._ctx.restore(),this._state.x=t.buffer.x,this._state.y=s,this._state.isFocused=!1,this._state.style=t.options.cursorStyle,this._state.width=i[2]}}.bind(t)};exports.decorateTerm=((t,{React:r})=>(class extends r.Component{constructor(...t){super(...t),this._onDecorated=this._onDecorated.bind(this),this.cursorRenderLayer=null,this.isVisible=!0}_onDecorated(t){this.props.onDecorated&&this.props.onDecorated(t),t&&(this.cursorRenderLayer=t.term.renderer._renderLayers[3],s(this.cursorRenderLayer),this._wrapOnOptionsChanged())}_wrapOnOptionsChanged(){const t=this,r=this.cursorRenderLayer.__proto__.onOptionsChanged;this.cursorRenderLayer.__proto__.onOptionsChanged=function(){const e=t.cursorRenderLayer._cursorBlinkStateManager;r.apply(this,arguments),e!==t.cursorRenderLayer._cursorBlinkStateManager&&t._hack()}}_hack(){this._wrapRestartFunction(),this._wrapRenderFunction()}_wrapRenderFunction(){const t=this,r=this.cursorRenderLayer._render;this.cursorRenderLayer._render=function(){r.apply(this,arguments);const{isCursorVisible:e}=this._cursorBlinkStateManager;e!==t.isVisible&&t._toggleVisibility(e)}}_wrapRestartFunction(){const t=this,r=this.cursorRenderLayer._cursorBlinkStateManager.restartBlinkAnimation;this.cursorRenderLayer._cursorBlinkStateManager.restartBlinkAnimation=function(){r.apply(this,arguments),t.cursorRenderLayer._canvas.classList.add("immediate-transition"),requestAnimationFrame(()=>{t.cursorRenderLayer._canvas.classList.remove("immediate-transition")})}}_toggleVisibility(t){this.isVisible=t,this.cursorRenderLayer._canvas.classList[this.isVisible?"remove":"add"]("fade-out")}render(){return r.createElement(t,Object.assign({},this.props,{onDecorated:this._onDecorated}))}})),exports.decorateConfig=(t=>Object.assign({},t,{cursorBlink:!0,css:`\n\t\t.xterm-cursor-layer {\n\t\t\topacity: 1;\n\t\t\ttransition: opacity 600ms;\n\t\t}\n\n\t\t.xterm-cursor-layer.fade-out {\n\t\t\topacity: 0;\n\t\t}\n\n\t\t.xterm-cursor-layer.immediate-transition {\n\t\t\ttransition-duration: 0ms;\n\t\t}\n\n\t\t${t.css||""}\n\t\t`}))}]));